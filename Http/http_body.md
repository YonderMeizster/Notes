# Тело HTTP-запроса

Структура http запроса и ответа выглядит так:

> request line
> headers
> пустая строка (перевод каретки)
> тело запроса

Причем тело является необязательным к передаче, как уже было выяснено.

С применением экранирования это выглядит так:

> 'request line'\n'header1'\n'header2'\n\n'body'

После второго заголовка идут два символа перевода строки, которые должны
означать, что http запрос завершен и дальше ничего полезного, по крайней мере
относящегося к этому запросу, быть не должно. Как же в таком случае передать
body?

Ответ кроется в заголовке content-length:

```
GET / HTTP/1.1
host: google.com

HTTP/1.1 301 Moved Permanently
...
Content-Length: 219
...

<HTML><HEAD><meta http-equiv="content-type" content="text/html;charset=utf-8">
<TITLE>301 Moved</TITLE></HEAD><BODY>
<H1>301 Moved</H1>
The document has moved
<A HREF="http://www.google.com/">here</A>.
</BODY></HTML>
Connection closed by foreign host.
```

Content-length формируется сервером в процессе формирования сообщения для
отправки. Такой знак дает понять принимающей стороне (клиенту или серверу, не
важно), что стоит ожидать столько- то байт после заголовков. Тем самым
осуществялется прием body.

## Нюансы

На практике получается так, что одного лишь заголовка content-length бывает
недостаточно для того, чтобы сервер принял body. Для этого им необходим еще и
заголовок content-type, опредляющий тип передаваемого контента. В body не
обязательно пихать html, туда можно вполне запихнуть и поток байтов, являющийся,
к примеру, картинкой.

А еще тело запроса можно пристыковывать к любому request line, даже, если это не
имеет смысла.