# CGI

CGI (Common Gateway Interface) - интерфейс, способ взаимодействия веб- сервера и
программы. Интерфейс был разработан таким образом, чтобы с ним была возможность
использовать любой язык программирования.

Принцип работы CGI следующий: поступающий HTTP запрос парсится веб-сервером, тем
самым преобразуясь в CGI форму (вид упаковки значений из запроса), после чего
вызывается зоготовленнный скрипт (программа), а ей в параметры передаются
значения из CGI формы. Ответ этой программы запаковывается в HTTP и возвращается
клиенту.

# WSGI

WSGI - питоновская фишка, предложенная в какие- то годы сообществом. В
оригинальном CGI была проблемка: на каждый http запрос приходилось испольнять
программу, то есть каждый раз запускать интерпретатор, в следствие чего росла
инфраструктурная нагрузка.

Решением этого стал WSGI, по которому вместо отдельных приложений запускались
функции, обрабатывающие WSGI форму. Получается, можно было держать всегда
запущенный интерпретатор в памяти, готовый к обработке запроса.

Согласно стандарту, веб- приложение - это функция, принимающая два аргумента:
словарь переменных окружения и функцию, устанавливающую параметры ответа и
возвращающую итератор. Вот пример подобной WSGI- функции:

```
def app(environ, start_response):
    data = b"Hello, World!\n"
    start_response("200 OK", [
        ("Content-Type", "text/plain"),
        ("Content-Length", str(len(data)))
    ])
    return iter([data])

```

В приведенной выше функции словарь переменных- окружения никак не используется.
Функиця start_response по заданынм параметрам выставляет строку статуса, а также
два заголовка. WSGI функция app возвращает итератор по data.