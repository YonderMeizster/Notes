# Сокеты. Модуль socket

## Интерфейс, предоставляемый модулем sockets
* socket()
* .bind()
* .listen()
* .accept()
* .connect()
* .connect_ex()
* .send()
* .recv()
* .close()

## TCP Сокеты

Объект tcp- сокет создается следующим образом:
```
sock = socket.socket() # через конструктор по умолчанию
```
Работа TCP- сокета (и UDP также) начинается на сервере. Первым делом сервер биндит для себя сокет.
По- питоновски, он вызывает метод .bind(), после этого он выставляет режим работы сокета в
прослушивание с помощью метода .listen(). Это обязательное действие по причине того, что этот же
сокет может использоваться и как клиентский, то есть для подключения. После того, как сокет
прослушивается, новое соединение необходимо принять, для этого на сервере вызывается метод
.accept(). При появлении нового соединения метод .accept на сервере и клиент проводят трехстороннее
рукопожатие и устанавливают соединение. Смысл этого рукопожатия заключается в подтверждении
того, что сервер и клиент могут достучаться друг до друга.

После того, как рукопожатие проведено, соединение считается установленным. Клиент отправляет данные
серверу, сервер их принимает и отправляет клиенту подтверждение об успешном получении. Для этого и
сервер и клиент(если он тоже на питоне) явно и неявно используют методы .recv() и send().

# Разберемся по- порядку с echo- сервером
```
import socket

HOST = "127.0.0.1"
PORT = 65432

with socket.socket(socket.AF_INET, socket.SOCK_STREAM) as s:
    s.bind((HOST, PORT))
    s.listen()
    conn, addr = s.accept()
    with conn:
        print(f"Connected by {addr}")
        while True:
            data = conn.recv(1024)
            if not data:
                break
            conn.sendall(data)
```
## Как мы определяем новый объект сокета?
Объект сокета создается через
```
socket.socket(socket.AF_INET, socket.SOCK_STREAM)
```
Причем в конструктор передаются две константы. Перва, **AF_INET**, представляет собой семейство адресов
IPV4, а вторая **SOCK_STREAM** представляет собой название TCP- портов. Таким образом, мы создали
объект- сокет для IPv4 и протокола TCP. Можно было бы создать и сокет для TCPv6 и UDP:
```
socket.socket(socket.AF_INET6, socket.SOCK_DGRAM)
```
## Как происходит биндинг?

